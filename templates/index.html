<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWA Presentation Design Platform | منصة تصميم العروض الإحترافية</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: #f8f9ff;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-area:hover {
            border-color: #764ba2;
            background: #f0f2ff;
        }
        
        .upload-area.drag-over {
            background: #e8eaff;
            border-color: #764ba2;
        }
        
        .upload-icon {
            font-size: 4em;
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .upload-text {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 10px;
        }
        
        .upload-hint {
            font-size: 0.9em;
            color: #888;
        }
        
        .file-input {
            display: none;
        }
        
        .files-list {
            margin-top: 20px;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .file-item:hover {
            background: #e8eaff;
            transform: translateX(-5px);
        }
        
        .file-icon {
            font-size: 2em;
            margin-left: 15px;
        }
        
        .file-info {
            flex: 1;
        }
        
        .file-name {
            font-weight: bold;
            color: #333;
        }
        
        .file-size {
            font-size: 0.85em;
            color: #888;
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            cursor: pointer;
        }
        
        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
            transition: border-color 0.3s;
            min-height: 120px;
        }
        
        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .textarea-hint {
            font-size: 0.85em;
            color: #888;
            margin-top: 8px;
            line-height: 1.5;
        }
        
        .button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .button-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .button-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            width: 100%;
        }
        
        .button-secondary:hover {
            background: #667eea;
            color: white;
        }
        
        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .button-icon {
            margin-left: 10px;
            font-size: 1.2em;
        }
        
        .status {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .download-link {
            display: inline-block;
            padding: 12px 25px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .download-link:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .language-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            padding: 10px 20px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1000;
        }
        
        .developer-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #ff6b6b;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s;
        }
        
        .developer-mode-toggle:hover {
            background: #ff5252;
            transform: scale(1.05);
        }
        
        .developer-panel {
            display: none;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            border: 3px solid #ff6b6b;
        }
        
        .developer-panel.active {
            display: block;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #666;
            text-transform: uppercase;
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .action-button {
            padding: 15px 20px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: #667eea;
        }
        
        .action-button:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }
        
        .action-button.danger {
            border-color: #dc3545;
            color: #dc3545;
        }
        
        .action-button.danger:hover {
            background: #dc3545;
            color: white;
        }
        
        .action-button.success {
            border-color: #28a745;
            color: #28a745;
        }
        
        .action-button.success:hover {
            background: #28a745;
            color: white;
        }
        
        .file-manager {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .file-manager-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
            transition: background 0.2s;
        }
        
        .file-manager-item:hover {
            background: #f8f9ff;
        }
        
        .file-manager-actions {
            display: flex;
            gap: 10px;
        }
        
        .file-manager-actions button {
            padding: 5px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .file-manager-actions .btn-delete {
            background: #dc3545;
            color: white;
        }
        
        .file-manager-actions .btn-delete:hover {
            background: #c82333;
        }
        
        .file-manager-actions .btn-view {
            background: #17a2b8;
            color: white;
        }
        
        .file-manager-actions .btn-view:hover {
            background: #138496;
        }
        
        .config-editor {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .config-group {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
        }
        
        .config-group h4 {
            margin-bottom: 15px;
            color: #667eea;
        }
        
        .config-item {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 15px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .config-item label {
            font-weight: 600;
            color: #333;
        }
        
        .config-item input,
        .config-item select {
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 12px 25px;
            cursor: pointer;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab:hover {
            color: #667eea;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .log-viewer {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-left: 3px solid #667eea;
            padding-left: 10px;
        }
        
        .log-entry.error {
            border-left-color: #dc3545;
            color: #ff6b6b;
        }
        
        .log-entry.success {
            border-left-color: #28a745;
            color: #5ced73;
        }
        
        .log-entry.warning {
            border-left-color: #ffc107;
            color: #ffd93d;
        }
        
        .batch-controls {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .batch-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f8f9ff;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .batch-checkbox {
            margin-left: 15px;
            width: 20px;
            height: 20px;
        }
        
        @media (max-width: 768px) {
            .controls {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
            }
            
            .config-item {
                grid-template-columns: 1fr;
            }
            
            .developer-mode-toggle {
                top: auto;
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="language-toggle" onclick="toggleLanguage()">
        🌐 <span id="langText">English</span>
    </div>
    
    <div class="developer-mode-toggle" onclick="toggleDeveloperMode()">
        👨‍💻 <span id="devModeText">Developer Mode</span>
    </div>
    
    <div class="container">
        <div class="header">
            <h1 id="mainTitle">🎬 منصة تصميم العروض الإحترافية AWA</h1>
            <p id="mainSubtitle">صمم وأنشئ عروض فيديو وعروض باور بوينت احترافية ومبتكرة</p>
        </div>
        
        <div class="main-content">
            <!-- Developer Control Panel -->
            <div class="developer-panel" id="developerPanel">
                <h2 class="section-title" style="color: #ff6b6b;">👨‍💻 Developer Control Panel / لوحة تحكم المطور</h2>
                
                <!-- Statistics Dashboard -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalFilesCount">0</div>
                        <div class="stat-label">Total Files / إجمالي الملفات</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="videosCount">0</div>
                        <div class="stat-label">Videos / فيديوهات</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="presentationsCount">0</div>
                        <div class="stat-label">Presentations / عروض</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="reportsCount">0</div>
                        <div class="stat-label">Reports / تقارير</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalSizeDisplay">0 MB</div>
                        <div class="stat-label">Total Size / الحجم الكلي</div>
                    </div>
                </div>
                
                <!-- Tabs for different control sections -->
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('files', event)">📁 Files Manager</button>
                    <button class="tab" onclick="switchTab('outputs', event)">📤 Outputs</button>
                    <button class="tab" onclick="switchTab('config', event)">⚙️ Configuration</button>
                    <button class="tab" onclick="switchTab('batch', event)">📦 Batch Operations</button>
                    <button class="tab" onclick="switchTab('logs', event)">📋 Logs</button>
                    <button class="tab" onclick="switchTab('api', event)">🔌 API Testing</button>
                </div>
                
                <!-- Files Manager Tab -->
                <div class="tab-content active" id="filesTab">
                    <h3>📁 Uploaded Files Management</h3>
                    <div class="action-grid">
                        <button class="action-button" onclick="refreshFilesList()">
                            🔄 Refresh List
                        </button>
                        <button class="action-button success" onclick="downloadAllFiles()">
                            📥 Download All
                        </button>
                        <button class="action-button danger" onclick="deleteAllFiles()">
                            🗑️ Delete All Files
                        </button>
                    </div>
                    <div class="file-manager" id="filesManager">
                        <p style="text-align: center; color: #888;">No files uploaded yet</p>
                    </div>
                </div>
                
                <!-- Outputs Tab -->
                <div class="tab-content" id="outputsTab">
                    <h3>📤 Generated Outputs Management</h3>
                    <div class="action-grid">
                        <button class="action-button" onclick="refreshOutputsList()">
                            🔄 Refresh Outputs
                        </button>
                        <button class="action-button success" onclick="downloadAllOutputs()">
                            📥 Download All Outputs
                        </button>
                        <button class="action-button danger" onclick="deleteAllOutputs()">
                            🗑️ Clear All Outputs
                        </button>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Videos</h4>
                        <div class="file-manager" id="videosManager">
                            <p style="text-align: center; color: #888;">No videos generated yet</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Presentations</h4>
                        <div class="file-manager" id="presentationsManager">
                            <p style="text-align: center; color: #888;">No presentations generated yet</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Reports (Word & PDF)</h4>
                        <div class="file-manager" id="reportsManager">
                            <p style="text-align: center; color: #888;">No reports generated yet</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Excel Files</h4>
                        <div class="file-manager" id="excelManager">
                            <p style="text-align: center; color: #888;">No Excel files generated yet</p>
                        </div>
                    </div>
                </div>
                
                <!-- Configuration Tab -->
                <div class="tab-content" id="configTab">
                    <h3>⚙️ Platform Configuration</h3>
                    <div class="config-editor">
                        <div class="config-group">
                            <h4>Video Settings</h4>
                            <div class="config-item">
                                <label>FPS:</label>
                                <input type="number" id="configFps" value="30" min="15" max="60">
                            </div>
                            <div class="config-item">
                                <label>Resolution:</label>
                                <select id="configResolution">
                                    <option value="1920x1080">1920x1080 (Full HD)</option>
                                    <option value="1280x720">1280x720 (HD)</option>
                                    <option value="3840x2160">3840x2160 (4K)</option>
                                </select>
                            </div>
                            <div class="config-item">
                                <label>Default Duration (seconds):</label>
                                <input type="number" id="configDuration" value="5" min="1" max="30">
                            </div>
                        </div>
                        
                        <div class="config-group">
                            <h4>TTS Settings</h4>
                            <div class="config-item">
                                <label>Voice Rate:</label>
                                <input type="number" id="configVoiceRate" value="1.0" min="0.5" max="2.0" step="0.1">
                            </div>
                            <div class="config-item">
                                <label>Default Language:</label>
                                <select id="configDefaultLang">
                                    <option value="ar">Arabic</option>
                                    <option value="en">English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="config-group">
                            <h4>Processing Settings</h4>
                            <div class="config-item">
                                <label>Max Chars Per Slide:</label>
                                <input type="number" id="configMaxChars" value="300" min="100" max="1000">
                            </div>
                            <div class="config-item">
                                <label>Max File Size (MB):</label>
                                <input type="number" id="configMaxFileSize" value="50" min="10" max="200">
                            </div>
                        </div>
                        
                        <button class="button button-primary" onclick="saveConfiguration()">
                            💾 Save Configuration
                        </button>
                    </div>
                </div>
                
                <!-- Batch Operations Tab -->
                <div class="tab-content" id="batchTab">
                    <h3>📦 Batch Operations</h3>
                    <p>Process multiple files in one operation</p>
                    
                    <div class="batch-controls">
                        <h4>Select Output Formats:</h4>
                        <div class="batch-item">
                            <input type="checkbox" id="batchVideo" class="batch-checkbox" checked>
                            <label for="batchVideo">🎬 Video</label>
                        </div>
                        <div class="batch-item">
                            <input type="checkbox" id="batchPowerPoint" class="batch-checkbox" checked>
                            <label for="batchPowerPoint">📊 PowerPoint</label>
                        </div>
                        <div class="batch-item">
                            <input type="checkbox" id="batchWord" class="batch-checkbox">
                            <label for="batchWord">📄 Word Document</label>
                        </div>
                        <div class="batch-item">
                            <input type="checkbox" id="batchPDF" class="batch-checkbox">
                            <label for="batchPDF">📕 PDF Report</label>
                        </div>
                        <div class="batch-item">
                            <input type="checkbox" id="batchExcel" class="batch-checkbox">
                            <label for="batchExcel">📈 Excel Spreadsheet</label>
                        </div>
                        
                        <button class="button button-primary" onclick="processBatch()" style="margin-top: 20px;">
                            🚀 Process All Selected Formats
                        </button>
                    </div>
                </div>
                
                <!-- Logs Tab -->
                <div class="tab-content" id="logsTab">
                    <h3>📋 System Logs</h3>
                    <div class="action-grid">
                        <button class="action-button" onclick="refreshLogs()">
                            🔄 Refresh Logs
                        </button>
                        <button class="action-button" onclick="clearLogs()">
                            🗑️ Clear Logs
                        </button>
                        <button class="action-button success" onclick="exportLogs()">
                            📥 Export Logs
                        </button>
                    </div>
                    <div class="log-viewer" id="logViewer">
                        <div class="log-entry success">[INFO] AWA Platform initialized successfully</div>
                        <div class="log-entry">[INFO] Ready to process requests</div>
                    </div>
                </div>
                
                <!-- API Testing Tab -->
                <div class="tab-content" id="apiTab">
                    <h3>🔌 API Testing Interface</h3>
                    <div class="config-editor">
                        <div class="config-group">
                            <h4>Test Endpoints</h4>
                            <div class="action-grid">
                                <button class="action-button" onclick="testEndpoint('/health')">
                                    ❤️ Health Check
                                </button>
                                <button class="action-button" onclick="testEndpoint('/list-files')">
                                    📁 List Files
                                </button>
                                <button class="action-button" onclick="testEndpoint('/stats')">
                                    📊 Get Stats
                                </button>
                            </div>
                        </div>
                        
                        <div class="config-group">
                            <h4>API Response</h4>
                            <div class="log-viewer" id="apiResponse">
                                <p>No API calls made yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Upload Section -->
            <div class="section">
                <h2 class="section-title" id="uploadTitle">📁 تحميل الملفات</h2>
                
                <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
                    <div class="upload-icon">📤</div>
                    <div class="upload-text" id="uploadText">انقر هنا أو اسحب الملفات لتحميلها</div>
                    <div class="upload-hint" id="uploadHint">PDF, صور, نصوص, وثائق (حتى 50MB)</div>
                </div>
                
                <input type="file" id="fileInput" class="file-input" multiple 
                       accept=".pdf,.png,.jpg,.jpeg,.gif,.txt,.doc,.docx,.xlsx,.csv">
                
                <div class="files-list" id="filesList"></div>
            </div>
            
            <!-- Configuration Section -->
            <div class="section">
                <h2 class="section-title" id="configTitle">⚙️ إعدادات العرض</h2>
                
                <div class="controls">
                    <div class="form-group">
                        <label class="form-label" id="titleLabel">عنوان العرض:</label>
                        <input type="text" id="presentationTitle" class="form-input" 
                               value="عرض إحترافي مبتكر" placeholder="أدخل عنوان العرض">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" id="languageLabel">اللغة:</label>
                        <select id="presentationLanguage" class="form-select">
                            <option value="ar">العربية (Arabic)</option>
                            <option value="en">الإنجليزية (English)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" id="typeLabel">نوع الإخراج:</label>
                    <select id="outputType" class="form-select" onchange="toggleMaxSlides()">
                        <option value="video">🎬 فيديو احترافي (Professional Video)</option>
                        <option value="powerpoint">📊 عرض باور بوينت (PowerPoint Presentation)</option>
                        <option value="excel">📈 جدول إكسل (Excel Spreadsheet)</option>
                        <option value="word">📄 مستند وورد (Word Document)</option>
                        <option value="pdf">📕 تقرير PDF (PDF Report)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="clarificationNotes" id="notesLabel">📝 ملاحظات وتوضيحات إضافية (اختياري):</label>
                    <textarea id="clarificationNotes" class="form-textarea" 
                              aria-describedby="notesHint"
                              maxlength="50000"
                              placeholder="أدخل ملاحظات أو توضيحات إضافية..."
                              rows="6"></textarea>
                    <div class="textarea-hint" id="notesHint">
                        يمكنك كتابة أي توضيحات أو متطلبات أو ملاحظات تساعد في إعداد العرض أو التقرير بالشكل المطلوب (حتى 50,000 حرف).
                    </div>

                <div class="form-group" id="maxSlidesGroup" style="display: none;">
                    <label class="form-label" id="maxSlidesLabel">الحد الأقصى للشرائح (اختياري):</label>
                    <input type="number" id="maxSlides" class="form-input" 
                           placeholder="اترك فارغاً لجميع الشرائح" min="1" max="100">
                    <div class="upload-hint" id="maxSlidesHint">حدد عدد الشرائح المطلوب لتقليل حجم الملف</div>
                </div>
            </div>
            
            <!-- Generate Section -->
            <div class="section">
                <h2 class="section-title" id="generateTitle">✨ إنشاء العرض</h2>
                
                <div id="statusMessage" class="status"></div>
                
                <button class="button button-primary" id="generateBtn" onclick="generatePresentation()">
                    <span id="generateBtnText">إعداد العرض الإحترافي</span>
                    <span class="button-icon">🚀</span>
                </button>
                
                <button class="button button-secondary" onclick="clearAll()">
                    <span id="clearBtnText">مسح الكل وإعادة البدء</span>
                    <span class="button-icon">🔄</span>
                </button>
                
                <div class="loading" id="loadingDiv">
                    <div class="spinner"></div>
                    <p id="loadingText">جاري إنشاء العرض الإحترافي... الرجاء الانتظار</p>
                </div>
                
                <div id="downloadSection"></div>
            </div>
        </div>
    </div>
    
    <script>
        let uploadedFiles = [];
        let currentLang = 'ar';
        
        // Translations
        const translations = {
            ar: {
                mainTitle: '🎬 منصة تصميم العروض الإحترافية AWA',
                mainSubtitle: 'صمم وأنشئ عروض فيديو وعروض باور بوينت وتقارير احترافية ومبتكرة',
                uploadTitle: '📁 تحميل الملفات',
                uploadText: 'انقر هنا أو اسحب الملفات لتحميلها',
                uploadHint: 'PDF, صور, نصوص, وثائق (حتى 50MB)',
                configTitle: '⚙️ إعدادات العرض',
                titleLabel: 'عنوان العرض:',
                languageLabel: 'اللغة:',
                typeLabel: 'نوع الإخراج:',
                notesLabel: '📝 ملاحظات وتوضيحات إضافية (اختياري):',
                notesHint: 'يمكنك كتابة أي توضيحات أو متطلبات أو ملاحظات تساعد في إعداد العرض أو التقرير بالشكل المطلوب (حتى 50,000 حرف).',

                maxSlidesLabel: 'الحد الأقصى للشرائح (اختياري):',
                maxSlidesHint: 'حدد عدد الشرائح المطلوب لتقليل حجم الملف',
                generateTitle: '✨ إنشاء العرض',
                generateBtnText: 'إعداد العرض الإحترافي',
                clearBtnText: 'مسح الكل وإعادة البدء',
                loadingText: 'جاري إنشاء العرض الإحترافي... الرجاء الانتظار',
                langText: 'English'
            },
            en: {
                mainTitle: '🎬 AWA Professional Presentation Design Platform',
                mainSubtitle: 'Design and create professional and innovative videos, PowerPoint presentations, and reports',
                uploadTitle: '📁 Upload Files',
                uploadText: 'Click here or drag files to upload',
                uploadHint: 'PDF, Images, Text, Documents (up to 50MB)',
                configTitle: '⚙️ Presentation Settings',
                titleLabel: 'Presentation Title:',
                languageLabel: 'Language:',
                typeLabel: 'Output Type:',
                notesLabel: '📝 Additional Notes & Clarifications (Optional):',
                notesHint: 'You can write any clarifications, requirements, or notes to help prepare the presentation or report as needed (up to 50,000 characters).',
                maxSlidesLabel: 'Maximum Slides (Optional):',
                maxSlidesHint: 'Set the desired number of slides to reduce file size',
                generateTitle: '✨ Generate Presentation',
                generateBtnText: 'Generate Professional Presentation',
                clearBtnText: 'Clear All and Restart',
                loadingText: 'Generating professional presentation... Please wait',
                langText: 'العربية'
            }
        };
        
        function toggleLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            
            // Update text content
            Object.keys(translations[currentLang]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[currentLang][key];
                }
            });
        }
        
        // File upload handling
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('drag-over');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('drag-over');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('drag-over');
            handleFiles(e.dataTransfer.files);
        });
        
        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });
        
        function handleFiles(files) {
            const formData = new FormData();
            
            for (let file of files) {
                formData.append('files', file);
            }
            
            showStatus('info', currentLang === 'ar' ? 'جاري رفع الملفات...' : 'Uploading files...');
            
            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    uploadedFiles = uploadedFiles.concat(data.files);
                    displayFiles();
                    showStatus('success', currentLang === 'ar' 
                        ? `تم رفع ${data.count} ملف بنجاح` 
                        : `${data.count} files uploaded successfully`);
                } else {
                    showStatus('error', data.error || (currentLang === 'ar' ? 'فشل رفع الملفات' : 'Failed to upload files'));
                }
            })
            .catch(error => {
                showStatus('error', currentLang === 'ar' ? 'خطأ في رفع الملفات' : 'Error uploading files');
            });
        }
        
        function displayFiles() {
            const filesList = document.getElementById('filesList');
            filesList.innerHTML = '';
            
            uploadedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-icon">${getFileIcon(file.type)}</div>
                    <div class="file-info">
                        <div class="file-name">${file.filename}</div>
                        <div class="file-size">${formatFileSize(file.size)}</div>
                    </div>
                `;
                filesList.appendChild(fileItem);
            });
        }
        
        function getFileIcon(type) {
            const icons = {
                'pdf': '📄',
                'png': '🖼️',
                'jpg': '🖼️',
                'jpeg': '🖼️',
                'gif': '🖼️',
                'txt': '📝',
                'doc': '📝',
                'docx': '📝',
                'xlsx': '📊',
                'csv': '📊'
            };
            return icons[type] || '📎';
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }
        
        function showStatus(type, message) {
            const status = document.getElementById('statusMessage');
            status.className = `status ${type}`;
            status.textContent = message;
            status.style.display = 'block';
            
            if (type === 'success' || type === 'error') {
                setTimeout(() => {
                    status.style.display = 'none';
                }, 5000);
            }
        }
        
        function toggleMaxSlides() {
            const outputType = document.getElementById('outputType').value;
            const maxSlidesGroup = document.getElementById('maxSlidesGroup');
            
            // Show max_slides option only for PowerPoint
            if (outputType === 'powerpoint') {
                maxSlidesGroup.style.display = 'block';
            } else {
                maxSlidesGroup.style.display = 'none';
            }
        }
        
        function generatePresentation() {
            if (uploadedFiles.length === 0) {
                showStatus('error', currentLang === 'ar' 
                    ? 'الرجاء تحميل ملف واحد على الأقل' 
                    : 'Please upload at least one file');
                return;
            }
            
            const title = document.getElementById('presentationTitle').value;
            const language = document.getElementById('presentationLanguage').value;
            const outputType = document.getElementById('outputType').value;
            const clarificationNotes = document.getElementById('clarificationNotes').value;

            const maxSlidesInput = document.getElementById('maxSlides');
            const maxSlides = maxSlidesInput.value ? parseInt(maxSlidesInput.value, 10) : null;
            
            const generateBtn = document.getElementById('generateBtn');
            const loadingDiv = document.getElementById('loadingDiv');
            
            generateBtn.disabled = true;
            loadingDiv.style.display = 'block';
            
            // Update loading text based on output type
            const loadingMessages = {
                'video': currentLang === 'ar' ? 'جاري إنشاء الفيديو... قد يستغرق هذا بضع دقائق' : 'Generating video... This may take a few minutes',
                'powerpoint': currentLang === 'ar' ? 'جاري إنشاء عرض باور بوينت...' : 'Generating PowerPoint presentation...',
                'excel': currentLang === 'ar' ? 'جاري إنشاء جدول إكسل...' : 'Generating Excel spreadsheet...',
                'word': currentLang === 'ar' ? 'جاري إنشاء مستند وورد...' : 'Generating Word document...',
                'pdf': currentLang === 'ar' ? 'جاري إنشاء تقرير PDF...' : 'Generating PDF report...'
            };
            
            showStatus('info', loadingMessages[outputType] || (currentLang === 'ar' 
                ? 'جاري إنشاء العرض... قد يستغرق هذا بضع دقائق' 
                : 'Generating presentation... This may take a few minutes'));
            
            const requestData = {
                title: title,
                language: language,
                output_type: outputType,
                clarification_notes: clarificationNotes,
                files: uploadedFiles.map(f => f.filename)
            };
            
            // Add max_slides only for PowerPoint
            if (outputType === 'powerpoint' && maxSlides) {
                requestData.max_slides = maxSlides;
            }
            
            fetch('/generate-presentation', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                generateBtn.disabled = false;
                loadingDiv.style.display = 'none';
                
                if (data.success) {
                    const successMessages = {
                        'video': currentLang === 'ar' ? 'تم إنشاء الفيديو بنجاح!' : 'Video generated successfully!',
                        'powerpoint': currentLang === 'ar' ? 'تم إنشاء عرض باور بوينت بنجاح!' : 'PowerPoint presentation generated successfully!',
                        'excel': currentLang === 'ar' ? 'تم إنشاء جدول إكسل بنجاح!' : 'Excel spreadsheet generated successfully!',
                        'word': currentLang === 'ar' ? 'تم إنشاء مستند وورد بنجاح!' : 'Word document generated successfully!',
                        'pdf': currentLang === 'ar' ? 'تم إنشاء تقرير PDF بنجاح!' : 'PDF report generated successfully!'
                    };
                    
                    showStatus('success', successMessages[data.output_type] || (currentLang === 'ar' 
                        ? 'تم إنشاء العرض بنجاح!' 
                        : 'Presentation generated successfully!'));
                    
                    const downloadSection = document.getElementById('downloadSection');
                    let downloadText = currentLang === 'ar' ? 'تحميل الملف' : 'Download File';
                    
                    if (data.slides_count) {
                        downloadText += ` (${data.slides_count} ${currentLang === 'ar' ? 'شريحة' : 'slides'})`;
                    }
                    
                    downloadSection.innerHTML = `
                        <a href="${data.download_url}" class="download-link">
                            📥 ${downloadText}: ${data.filename}
                        </a>
                    `;
                } else {
                    showStatus('error', data.error || (currentLang === 'ar' 
                        ? 'فشل إنشاء العرض' 
                        : 'Failed to generate presentation'));
                }
            })
            .catch(error => {
                generateBtn.disabled = false;
                loadingDiv.style.display = 'none';
                showStatus('error', currentLang === 'ar' 
                    ? 'خطأ في إنشاء العرض' 
                    : 'Error generating presentation');
            });
        }
        
        function clearAll() {
            uploadedFiles = [];
            document.getElementById('filesList').innerHTML = '';
            document.getElementById('downloadSection').innerHTML = '';
            document.getElementById('statusMessage').style.display = 'none';
            document.getElementById('presentationTitle').value = currentLang === 'ar' 
                ? 'عرض إحترافي مبتكر' 
                : 'Professional Presentation';
            document.getElementById('clarificationNotes').value = '';
        }
        
        // Developer Mode Functions
        let developerModeActive = false;
        
        function toggleDeveloperMode() {
            developerModeActive = !developerModeActive;
            const panel = document.getElementById('developerPanel');
            const toggleBtn = document.querySelector('.developer-mode-toggle');
            
            if (developerModeActive) {
                panel.classList.add('active');
                toggleBtn.style.background = '#28a745';
                loadDeveloperStats();
                addLog('Developer mode activated', 'success');
            } else {
                panel.classList.remove('active');
                toggleBtn.style.background = '#ff6b6b';
                addLog('Developer mode deactivated', 'info');
            }
        }
        
        function switchTab(tabName, event) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Load data for specific tabs
            if (tabName === 'files') {
                refreshFilesList();
            } else if (tabName === 'outputs') {
                refreshOutputsList();
            }
            
            addLog(`Switched to ${tabName} tab`, 'info');
        }
        
        function loadDeveloperStats() {
            // Load statistics
            fetch('/stats')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById('totalFilesCount').textContent = data.total_files || 0;
                        document.getElementById('videosCount').textContent = data.videos_count || 0;
                        document.getElementById('presentationsCount').textContent = data.presentations_count || 0;
                        document.getElementById('reportsCount').textContent = data.reports_count || 0;
                        document.getElementById('totalSizeDisplay').textContent = formatFileSize(data.total_size || 0);
                        addLog('Statistics loaded successfully', 'success');
                    }
                })
                .catch(error => {
                    addLog('Failed to load statistics: ' + error, 'error');
                });
        }
        
        function refreshFilesList() {
            fetch('/list-files')
                .then(response => response.json())
                .then(data => {
                    const filesManager = document.getElementById('filesManager');
                    
                    if (data.files && data.files.length > 0) {
                        filesManager.innerHTML = '';
                        data.files.forEach(file => {
                            const fileItem = document.createElement('div');
                            fileItem.className = 'file-manager-item';
                            fileItem.innerHTML = `
                                <div>
                                    <strong>${getFileIcon(file.type)} ${file.filename}</strong>
                                    <div style="font-size: 0.85em; color: #888;">
                                        ${formatFileSize(file.size)}
                                    </div>
                                </div>
                                <div class="file-manager-actions">
                                    <button class="btn-view" onclick="viewFile('${file.filename}')">View</button>
                                    <button class="btn-delete" onclick="deleteFile('${file.filename}')">Delete</button>
                                </div>
                            `;
                            filesManager.appendChild(fileItem);
                        });
                        addLog(`Loaded ${data.files.length} files`, 'success');
                    } else {
                        filesManager.innerHTML = '<p style="text-align: center; color: #888;">No files uploaded yet</p>';
                        addLog('No files found', 'info');
                    }
                })
                .catch(error => {
                    addLog('Failed to load files: ' + error, 'error');
                });
        }
        
        function refreshOutputsList() {
            // Refresh videos
            fetch('/list-outputs?type=videos')
                .then(response => response.json())
                .then(data => {
                    updateOutputManager('videosManager', data.files || []);
                })
                .catch(error => addLog('Failed to load videos: ' + error, 'error'));
            
            // Refresh presentations
            fetch('/list-outputs?type=presentations')
                .then(response => response.json())
                .then(data => {
                    updateOutputManager('presentationsManager', data.files || []);
                })
                .catch(error => addLog('Failed to load presentations: ' + error, 'error'));
            
            // Refresh reports
            fetch('/list-outputs?type=reports')
                .then(response => response.json())
                .then(data => {
                    updateOutputManager('reportsManager', data.files || []);
                })
                .catch(error => addLog('Failed to load reports: ' + error, 'error'));
            
            // Refresh excel
            fetch('/list-outputs?type=excel')
                .then(response => response.json())
                .then(data => {
                    updateOutputManager('excelManager', data.files || []);
                })
                .catch(error => addLog('Failed to load excel files: ' + error, 'error'));
        }
        
        function updateOutputManager(managerId, files) {
            const manager = document.getElementById(managerId);
            
            if (files && files.length > 0) {
                manager.innerHTML = '';
                files.forEach(file => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-manager-item';
                    fileItem.innerHTML = `
                        <div>
                            <strong>${getFileIcon(file.type)} ${file.filename}</strong>
                            <div style="font-size: 0.85em; color: #888;">
                                ${formatFileSize(file.size)} - ${new Date(file.created).toLocaleString()}
                            </div>
                        </div>
                        <div class="file-manager-actions">
                            <button class="btn-view" onclick="downloadOutput('${file.type}', '${file.filename}')">Download</button>
                            <button class="btn-delete" onclick="deleteOutput('${file.type}', '${file.filename}')">Delete</button>
                        </div>
                    `;
                    manager.appendChild(fileItem);
                });
            } else {
                const noFilesMsg = managerId.replace('Manager', '') === 'videos' ? 'No videos generated yet' :
                                   managerId.replace('Manager', '') === 'presentations' ? 'No presentations generated yet' :
                                   managerId.replace('Manager', '') === 'reports' ? 'No reports generated yet' :
                                   'No Excel files generated yet';
                manager.innerHTML = `<p style="text-align: center; color: #888;">${noFilesMsg}</p>`;
            }
        }
        
        function deleteFile(filename) {
            if (!confirm(`Delete file: ${filename}?`)) return;
            
            fetch('/delete-file', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({filename: filename})
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    addLog(`Deleted file: ${filename}`, 'success');
                    refreshFilesList();
                    loadDeveloperStats();
                } else {
                    addLog(`Failed to delete file: ${data.error}`, 'error');
                }
            })
            .catch(error => addLog('Delete failed: ' + error, 'error'));
        }
        
        function deleteAllFiles() {
            if (!confirm('Delete ALL uploaded files? This cannot be undone!')) return;
            
            fetch('/delete-all-files', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    addLog(`Deleted ${data.count} files`, 'success');
                    refreshFilesList();
                    loadDeveloperStats();
                    uploadedFiles = [];
                    displayFiles();
                } else {
                    addLog(`Failed to delete files: ${data.error}`, 'error');
                }
            })
            .catch(error => addLog('Delete all failed: ' + error, 'error'));
        }
        
        function deleteOutput(type, filename) {
            if (!confirm(`Delete output: ${filename}?`)) return;
            
            fetch('/delete-output', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({type: type, filename: filename})
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    addLog(`Deleted output: ${filename}`, 'success');
                    refreshOutputsList();
                    loadDeveloperStats();
                } else {
                    addLog(`Failed to delete output: ${data.error}`, 'error');
                }
            })
            .catch(error => addLog('Delete failed: ' + error, 'error'));
        }
        
        function deleteAllOutputs() {
            if (!confirm('Delete ALL generated outputs? This cannot be undone!')) return;
            
            fetch('/delete-all-outputs', {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    addLog(`Deleted all outputs (${data.count} files)`, 'success');
                    refreshOutputsList();
                    loadDeveloperStats();
                } else {
                    addLog(`Failed to delete outputs: ${data.error}`, 'error');
                }
            })
            .catch(error => addLog('Delete all outputs failed: ' + error, 'error'));
        }
        
        function downloadAllFiles() {
            addLog('Preparing download archive...', 'info');
            window.location.href = '/download-all-files';
        }
        
        function downloadAllOutputs() {
            addLog('Preparing outputs archive...', 'info');
            window.location.href = '/download-all-outputs';
        }
        
        function downloadOutput(type, filename) {
            const urlMap = {
                'videos': '/download/',
                'presentations': '/download-pptx/',
                'reports': '/download-word/',
                'excel': '/download-excel/'
            };
            
            if (filename.endsWith('.pdf')) {
                window.location.href = '/download-pdf/' + filename;
            } else {
                window.location.href = urlMap[type] + filename;
            }
        }
        
        function viewFile(filename) {
            addLog(`Viewing file: ${filename}`, 'info');
            // This could open a modal or new tab to view the file
            showStatus('info', currentLang === 'ar' 
                ? `عرض الملف: ${filename}` 
                : `Viewing file: ${filename}`);
        }
        
        function saveConfiguration() {
            const config = {
                video: {
                    fps: parseInt(document.getElementById('configFps').value),
                    resolution: document.getElementById('configResolution').value,
                    default_duration: parseInt(document.getElementById('configDuration').value)
                },
                tts: {
                    voice_rate: parseFloat(document.getElementById('configVoiceRate').value),
                    default_language: document.getElementById('configDefaultLang').value
                },
                processing: {
                    max_chars_per_slide: parseInt(document.getElementById('configMaxChars').value),
                    max_file_size_mb: parseInt(document.getElementById('configMaxFileSize').value)
                }
            };
            
            fetch('/save-config', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(config)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    addLog('Configuration saved successfully', 'success');
                    showStatus('success', currentLang === 'ar' 
                        ? 'تم حفظ الإعدادات بنجاح' 
                        : 'Configuration saved successfully');
                } else {
                    addLog(`Failed to save configuration: ${data.error}`, 'error');
                }
            })
            .catch(error => addLog('Save config failed: ' + error, 'error'));
        }
        
        function processBatch() {
            if (uploadedFiles.length === 0) {
                showStatus('error', currentLang === 'ar' 
                    ? 'الرجاء تحميل ملفات أولاً' 
                    : 'Please upload files first');
                return;
            }
            
            const formats = [];
            if (document.getElementById('batchVideo').checked) formats.push('video');
            if (document.getElementById('batchPowerPoint').checked) formats.push('powerpoint');
            if (document.getElementById('batchWord').checked) formats.push('word');
            if (document.getElementById('batchPDF').checked) formats.push('pdf');
            if (document.getElementById('batchExcel').checked) formats.push('excel');
            
            if (formats.length === 0) {
                showStatus('error', 'Please select at least one output format');
                return;
            }
            
            addLog(`Starting batch processing for ${formats.length} formats`, 'info');
            
            const title = document.getElementById('presentationTitle').value;
            const language = document.getElementById('presentationLanguage').value;
            
            let completed = 0;
            let failed = 0;
            
            formats.forEach(format => {
                const requestData = {
                    title: title,
                    language: language,
                    output_type: format,
                    files: uploadedFiles.map(f => f.filename)
                };
                
                fetch('/generate-presentation', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(requestData)
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        completed++;
                        addLog(`✓ ${format} generated successfully`, 'success');
                    } else {
                        failed++;
                        addLog(`✗ ${format} generation failed: ${data.error}`, 'error');
                    }
                    
                    // Check if all done
                    if (completed + failed === formats.length) {
                        addLog(`Batch complete: ${completed} successful, ${failed} failed`, 'info');
                        refreshOutputsList();
                        loadDeveloperStats();
                    }
                })
                .catch(error => {
                    failed++;
                    addLog(`✗ ${format} generation error: ${error}`, 'error');
                });
            });
        }
        
        function addLog(message, type = 'info') {
            const logViewer = document.getElementById('logViewer');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            
            const typeLabel = type === 'error' ? 'ERROR' : 
                            type === 'success' ? 'SUCCESS' : 
                            type === 'warning' ? 'WARNING' : 'INFO';
            
            logEntry.textContent = `[${timestamp}] [${typeLabel}] ${message}`;
            logViewer.appendChild(logEntry);
            logViewer.scrollTop = logViewer.scrollHeight;
        }
        
        function refreshLogs() {
            addLog('Logs refreshed', 'info');
        }
        
        function clearLogs() {
            const logViewer = document.getElementById('logViewer');
            logViewer.innerHTML = '<div class="log-entry success">[INFO] Logs cleared</div>';
        }
        
        function exportLogs() {
            const logViewer = document.getElementById('logViewer');
            const logs = logViewer.innerText;
            const blob = new Blob([logs], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `awa-logs-${new Date().getTime()}.txt`;
            a.click();
            addLog('Logs exported', 'success');
        }
        
        function testEndpoint(endpoint) {
            addLog(`Testing endpoint: ${endpoint}`, 'info');
            
            fetch(endpoint)
                .then(response => response.json())
                .then(data => {
                    const apiResponse = document.getElementById('apiResponse');
                    apiResponse.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                    addLog(`API test successful: ${endpoint}`, 'success');
                })
                .catch(error => {
                    const apiResponse = document.getElementById('apiResponse');
                    apiResponse.innerHTML = `<pre style="color: #ff6b6b;">Error: ${error}</pre>`;
                    addLog(`API test failed: ${endpoint} - ${error}`, 'error');
                });
        }
        
        // Load existing files on page load
        window.addEventListener('load', () => {
            fetch('/list-files')
                .then(response => response.json())
                .then(data => {
                    if (data.files && data.files.length > 0) {
                        uploadedFiles = data.files;
                        displayFiles();
                    }
                });
        });
    </script>
</body>
</html>
